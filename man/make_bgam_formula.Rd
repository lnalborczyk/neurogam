% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_bgam_formula.R
\name{make_bgam_formula}
\alias{make_bgam_formula}
\title{Build a \pkg{brms} formula for time-resolved BGAMMs}
\usage{
make_bgam_formula(
  family,
  multilevel = c("summary", "group"),
  predictor_type = c("none", "categorical", "continuous"),
  within_between = c(NA, "within-subject", "between-subject"),
  kvalue = 20,
  bs = "tp",
  include_ar_term = FALSE,
  varying_smooth = TRUE,
  include_by_smooth = TRUE
)
}
\arguments{
\item{family}{A family object describing the response distribution. Must be
either \code{gaussian()} or \code{binomial()} (as used in \code{testing_through_time}).}

\item{multilevel}{Character; which model family to build. One of
\code{"summary"} (participant-level varying effects) or \code{"group"}
(population-level GAM without varying effects).}

\item{predictor_type}{Character; type of predictor. One of
\code{"none"}, \code{"categorical"}, or \code{"continuous"}.}

\item{within_between}{Character; only used when \code{predictor_type = "categorical"}
and \code{multilevel = "summary"}. Must be one of \code{"within-subject"}
or \code{"between-subject"} to determine whether to include a varying slope
\code{(1 + predictor | participant)} or only \code{(1 | participant)}.}

\item{kvalue}{Numeric; basis dimension \code{k} used in \code{s(time, ..., k = kvalue)}.}

\item{bs}{Character; spline basis used in \code{s(time, bs = bs, ...)} (e.g., \code{"tp"}).}

\item{include_ar_term}{Logical; if \code{TRUE}, adds an AR(1) autocorrelation
  structure within participant via
.  \code{autocor = brms::ar(time = "time", gr = "participant", p = 1, cov = FALSE)}.}

\item{varying_smooth}{Logical; if \code{TRUE} (default), add a factor-smooth interaction
\code{s(participant, time, bs = "fs", ...)} in \code{multilevel = "summary"} models.
If \code{FALSE}, only include the intercept/slope varying effects.}

\item{include_by_smooth}{Logical; if \code{TRUE} (default) and
\code{predictor_type = "categorical"}, the time smooth is specified with
\code{by = predictor}.}
}
\value{
A \code{\link[brms]{brmsformula}} object.
}
\description{
Construct the appropriate \code{\link[brms]{brmsformula}} used internally by
\code{\link{testing_through_time}}, depending on the response distribution
(Gaussian vs. Binomial), whether a categorical predictor is provided, the
multilevel mode (\code{"summary"} vs. \code{"group"}), and the chosen random/varying
effects structure.
}
\details{
The function assumes that the data passed to \code{brm()} has already been
reshaped to use the internal column names expected by \code{testing_through_time}:
\code{time}, \code{participant}, \code{predictor} (optional), and one of
\code{outcome_mean} / \code{outcome_sd} (Gaussian) or \code{success} / \code{trials}
(Binomial).
}
\examples{
\dontrun{
# Gaussian, summary, no predictor
make_bgam_formula(
  family = gaussian(),
  multilevel = "summary",
  predictor_type = "none",
  kvalue = 20, bs = "tp"
  )

# Binomial, summary, within-subject predictor
make_bgam_formula(
  family = binomial(),
  multilevel = "summary",
  predictor_type = "categorical",
  within_between = "within-subject",
  kvalue = 20, bs = "tp"
  )
}

}
